{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Form,Button,Col,Row,ListGroup,Image,Card}from'react-bootstrap';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import{NumberFormat}from'./NumberFormat';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(_ref){var history=_ref.history;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,error=orderCreate.error,success=orderCreate.success;// console.log(order)\nvar dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);cart.shippingPrice=(cart.itemsPrice>100?0:10).toFixed(2);cart.taxPrice=(Number(0.082)*cart.itemsPrice).toFixed(2);cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);if(!cart.paymentMethod){history.push('/payment');}useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[success,history]);var placeOrder=function placeOrder(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"SHIPPING\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping: \"}),cart.shippingAddress.address,\",\",cart.shippingAddress.city,\",\",' ',cart.shippingAddress.postalCode,\",\",' ',cart.shippingAddress.state,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"PAYMENT METHOD\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method: \"}),cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"ORDER ITEMS\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"YOUR CART IS EMPTY\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:/*#__PURE__*/_jsx(\"h4\",{children:item.name})})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" X \",NumberFormat(item.price),\"=\",NumberFormat((item.qty*item.price).toFixed(2))]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"ORDER SUMMARY\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items:\"}),/*#__PURE__*/_jsx(Col,{children:NumberFormat(cart.itemsPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsx(Col,{children:NumberFormat(cart.shippingPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsx(Col,{children:NumberFormat(cart.taxPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsx(Col,{children:NumberFormat(cart.totalPrice)})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems===0,onClick:placeOrder,children:\"Place Order\"})})]})})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"sources":["/Users/aadarshraj/Development/Shopping/backend/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useState","Form","Button","Col","Row","ListGroup","Image","Card","Link","useDispatch","useSelector","Message","CheckoutSteps","createOrder","ORDER_CREATE_RESET","NumberFormat","PlaceOrderScreen","history","orderCreate","state","order","error","success","dispatch","cart","itemsPrice","cartItems","reduce","acc","item","price","qty","toFixed","shippingPrice","taxPrice","Number","totalPrice","paymentMethod","push","_id","type","placeOrder","orderItems","shippingAddress","address","city","postalCode","country","length","map","index","image","name","product"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\nimport {Form,Button,Col,Row,ListGroup,Image,Card} from 'react-bootstrap'\nimport { Link } from 'react-router-dom';\nimport { useDispatch,useSelector } from 'react-redux'\nimport Message from '../components/Message'\n\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport { createOrder } from '../actions/orderActions'\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport { NumberFormat } from './NumberFormat';\n\n\n\n\nfunction PlaceOrderScreen({ history }) {\n\n    const orderCreate=useSelector(state=>state.orderCreate)\n    const { order,error,success } = orderCreate\n    // console.log(order)\n\n    const dispatch=useDispatch()\n    const cart=useSelector(state=>state.cart)\n\n    cart.itemsPrice=cart.cartItems.reduce((acc,item)=>acc+item.price*item.qty,0).toFixed(2)\n    cart.shippingPrice=(cart.itemsPrice>100?0:10).toFixed(2)\n    cart.taxPrice=(Number(0.082)*cart.itemsPrice).toFixed(2)\n    cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2)\n\n    if(!cart.paymentMethod){\n        history.push('/payment')\n    }\n\n    useEffect(()=> {\n        if(success){\n            history.push(`/order/${order._id}`)\n            dispatch({type:ORDER_CREATE_RESET})\n        }\n    },[success,history])\n\n\n\n    const placeOrder = () =>{\n        dispatch(createOrder({\n            orderItems:cart.cartItems,\n            shippingAddress:cart.shippingAddress,\n            paymentMethod:cart.paymentMethod,\n            itemsPrice:cart.itemsPrice,\n            shippingPrice:cart.shippingPrice,\n            taxPrice:cart.taxPrice,\n            totalPrice:cart.totalPrice,\n        }))\n    }\n    return (\n        <div>\n            <CheckoutSteps step1 step2 step3 step4 />\n            <Row>\n                <Col md={8}>\n                    <ListGroup variant=\"flush\">\n                        <ListGroup.Item>\n                            <h2>SHIPPING</h2>\n                            <p>\n                                <strong>Shipping: </strong>\n                                {cart.shippingAddress.address},{cart.shippingAddress.city},\n                                {' '}\n                                {cart.shippingAddress.postalCode},\n                                {' '}\n                                {cart.shippingAddress.state},\n                                {' '}\n                                {cart.shippingAddress.country}\n\n                            </p>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <h2>PAYMENT METHOD</h2>\n                            <p>\n                                <strong>Method: </strong>\n                                {cart.paymentMethod}\n\n                            </p>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <h2>ORDER ITEMS</h2>\n                            {cart.cartItems.length===0?<Message variant=\"info\">YOUR CART IS EMPTY</Message>\n                            \n                            :(\n                                <ListGroup variant=\"flush\">\n                                    {cart.cartItems.map((item,index)=>(\n                                       <ListGroup.Item key={index}>\n                                           <Row>\n                                              <Col md={2}>\n                                                <Image src={item.image} alt={item.name} fluid rounded />\n                                              </Col> \n\n                                              <Col>\n                                                <Link to={`/product/${item.product}`}><h4>{item.name}</h4></Link>\n                                              </Col>\n\n                                              <Col md={4}>\n                                                  {item.qty} X {NumberFormat(item.price)}={NumberFormat((item.qty*item.price).toFixed(2))}\n                                              \n                                              </Col>\n                                           </Row>\n                                       </ListGroup.Item> \n                                    ))}\n                                </ListGroup>\n                            )}\n                        </ListGroup.Item>\n\n                    </ListGroup>\n                </Col>\n                <Col md={4}>\n                    <Card>\n                        <ListGroup variant=\"flush\">\n                            <ListGroup.Item>\n                               <h2>ORDER SUMMARY</h2> \n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                <Row>\n                                    <Col>\n                                        Items:\n                                    </Col>\n                                    <Col>{NumberFormat(cart.itemsPrice)}</Col>\n                                </Row>\n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                <Row>\n                                    <Col>\n                                        Shipping:\n                                    </Col>\n                                    <Col>{NumberFormat(cart.shippingPrice)}</Col>\n                                </Row>\n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                <Row>\n                                    <Col>\n                                        Tax:\n                                    </Col>\n                                    <Col>{NumberFormat(cart.taxPrice)}</Col>\n                                </Row>\n                            </ListGroup.Item>\n\n                            <ListGroup.Item>\n                                <Row>\n                                    <Col>\n                                        Total:\n                                    </Col>\n                                    <Col>{NumberFormat(cart.totalPrice)}</Col>\n                                </Row>\n                            </ListGroup.Item>\n                            <ListGroup.Item>\n                                {error && <Message variant='danger'> { error } </Message> }\n                            </ListGroup.Item>\n                            <ListGroup.Item>\n                                <Button \n                                    type='button'\n                                    className='btn-block'\n                                    disabled={cart.cartItems===0}\n                                    onClick={placeOrder}\n                                >\n                                    Place Order\n\n                                </Button>\n                            </ListGroup.Item>\n                        </ListGroup>\n                    </Card>\n                </Col>\n            </Row>\n\n        </div>\n    )\n}\n\nexport default PlaceOrderScreen\n"]},"metadata":{},"sourceType":"module"}